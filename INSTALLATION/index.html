<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>Installation - MichaelBot Documentation</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/font-awesome.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css">

        <script src="../js/jquery-1.10.2.min.js" defer></script>
        <script src="../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="..">MichaelBot Documentation</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href=".." class="nav-link">Home</a>
                            </li>
                            <li class="navitem active">
                                <a href="./" class="nav-link">Installation</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Commands <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../categories/bot/" class="dropdown-item">Bot</a>
</li>
                                    
<li>
    <a href="../categories/fun/" class="dropdown-item">Fun</a>
</li>
                                    
<li>
    <a href="../categories/logger/" class="dropdown-item">Logs</a>
</li>
                                    
<li>
    <a href="../categories/music/" class="dropdown-item">Music</a>
</li>
                                    
<li>
    <a href="../categories/utilities/" class="dropdown-item">Utilities</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href=".." class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../categories/bot/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#installation" class="nav-link">Installation</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#prerequisites" class="nav-link">Prerequisites</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#about-lavalink" class="nav-link">About Lavalink</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#about-postgresql" class="nav-link">About PostgreSQL</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#build-instructions" class="nav-link">Build Instructions</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#whats-next" class="nav-link">What's next?</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="installation">Installation</h1>
<p>The instructions are geared towards Ubuntu (Kubuntu specifically) because that's what I use. As the time of this writing, I haven't tested any of the code on Windows. There will be instructions in the future, but they might or might not work since I don't work on Windows regularly.</p>
<h2 id="prerequisites">Prerequisites</h2>
<ul>
<li>Requires: Python 3.8+ (ideally latest), Git, <code>pip</code>, <code>virtualenv</code> OR <code>python3-venv</code> under Python.</li>
<li>Optional: Lavalink (more information below), Docker (for Lavalink), PostgreSQL (more information below).</li>
</ul>
<h2 id="about-lavalink">About Lavalink</h2>
<p>Lavalink is optional for the bot. If you don't plan to use the music functionality, you can simply edit <code>main.py</code> the <code>EXTENSION</code> variable to exclude <code>categories.music</code>. Then you can completely ignore this section and move on. Otherwise, you'll need to finish setting up Lavalink and get it running.</p>
<p>There are 2 options to host Lavalink: you can host it directly using the <code>.jar</code> file or use Docker. I personally switched to Docker recently so I won't tell which one you should go. In either cases, you'll need a file <code>application.yml</code> to configure the server. An example is provided in <code>./lib/Lavalink</code>. You'll also need Java 13+, which can be downloaded <a href="https://adoptopenjdk.net/archive.html?variant=openjdk13&amp;jvmVariant=hotspot">here</a> or somewhere else (there are a billion places to download a billion java versions I'm not gonna even bother).</p>
<h3 id="running-lavalink-jar">Running Lavalink (.jar)</h3>
<ul>
<li>Download <a href="https://github.com/freyacodes/Lavalink/releases"><code>Lavalink.jar</code></a>, or use the one currently in <code>./lib/Lavalink/</code>.</li>
<li>Run <code>java -jar &lt;path to Lavalink.jar&gt;</code>. Lavalink server should start running now. By default, it'll run on <code>localhost:2333</code> unless you configure it in <code>application.yml</code>.</li>
</ul>
<h3 id="running-lavalink-docker">Running Lavalink (Docker)</h3>
<ul>
<li>Download Docker. <a href="https://docs.docker.com/engine/install/ubuntu/">Here</a> is the guide for Ubuntu.</li>
<li>Run <code>docker pull fredboat/lavalink:master</code>. This will pull the stable image.</li>
<li>Run <code>docker run --name &lt;name&gt; -p &lt;port&gt;:&lt;port&gt; -d -v &lt;path-to-application.yml&gt;:/opt/Lavalink/application.yml fredboat/lavalink:master</code>, where <code>&lt;name&gt;</code> is the name of the process, <code>&lt;port&gt;</code> is the port the server is on, and <code>&lt;path-to-application.yml&gt;</code> is the absolute path to the config file.</li>
<li>To stop the process, run <code>docker stop &lt;name&gt;</code>.</li>
</ul>
<h2 id="about-postgresql">About PostgreSQL</h2>
<p>PostgreSQL is optional for the bot, but is strongly recommended. Without a database, some features will be missing, such as prefix config, blacklisting, logging, etc. In addition to that, although the code can handle no database scenario on its own, it is not well-tested for such cases, so there might be some edge cases here and there.</p>
<p>This is a pretty fine guide to install PostgreSQL on Ubuntu: https://linuxhint.com/postgresql_installation_guide_ubuntu_20-04/</p>
<p>After installing Postgres, create a database and check the connection info. You'll need this later.</p>
<h2 id="build-instructions">Build Instructions</h2>
<ol>
<li>Clone the repository.</li>
</ol>
<pre><code class="language-sh">git clone https://github.com/MikeJollie2707/MichaelBot.git .
</code></pre>
<ol>
<li>Activate virtual environment and install libraries.</li>
</ol>
<pre><code class="language-sh">python3 -m pip venv venv
source ./venv/bin/activate
python3 -m pip install -r requirement.txt
</code></pre>
<ol>
<li>Configure the bot.</li>
</ol>
<p>Inside <code>./setup</code>, create a <code>.json</code> file. I'll call it <code>secret.json</code>.</p>
<pre><code class="language-json">// secret.json
{
    &quot;token&quot;: &quot;Bot token here&quot;,
    &quot;host&quot;: &quot;localhost&quot;,
    &quot;port&quot;: 5432,
    &quot;database&quot;: &quot;database name&quot;,
    &quot;user&quot;: &quot;user name&quot;,
    &quot;password&quot;: &quot;password&quot;,
    &quot;weather_api_key&quot;: &quot;api key&quot;
}
</code></pre>
<p>Within <code>./setup</code>, there's also another file called <code>config.json</code>. The file has the following structure:</p>
<pre><code class="language-json">// config.json
{
    &quot;BotIndex&quot;: {
        &quot;version&quot;: &quot;Required&quot;,
        &quot;description&quot;: &quot;Required&quot;,
        &quot;prefix&quot;: &quot;Required&quot;,
        &quot;launch_options&quot;: &quot;Optional&quot;,
        &quot;default_guilds&quot;: [123456],

        &quot;secret&quot;: &quot;secret.json&quot;
    }
}
</code></pre>
<ul>
<li><code>BotIndex</code>: the index you'll refer to the bot when you launch it from the terminal. Usually the bot name without space.</li>
<li><code>version</code>: the bot version. Just fake something up like <code>69.69beta</code> if you don't really care about this.</li>
<li><code>description</code>: the bot's about me. Discord doesn't have a way to retrieve this so this is required for now.</li>
<li><code>prefix</code>: the bot's default prefix.</li>
<li><code>launch_options</code>: an optional string to pass into the bot when it launches. This mostly affects terminal logging. Acceptable options are:<ul>
<li><code>-d</code> or <code>--debug</code>: Launch the bot in debug mode. This will set the log level to <code>DEBUG</code> but more importantly, it'll apply slash commands to <code>default_guilds</code> immediately (no need to wait at most 1 hour). If this is passed, <code>default_guilds</code> must also be non-empty.</li>
<li><code>-q</code> or <code>--quiet</code>: Launch the bot in quiet mode. This will disable terminal logging, but any uncaught exceptions will still spawn in <code>stderr</code>.</li>
</ul>
</li>
<li><code>default_guilds</code>: a list of guilds' ids to apply slash commands immediately. This is required if the bot is launched in debug mode.</li>
<li><code>secret</code>: the file name that contains your bot's secret like token.</li>
</ul>
<p>You can view my bot config as an example.</p>
<ol>
<li>Run the bot.</li>
</ol>
<pre><code class="language-sh">python3 -O main.py BotIndex
</code></pre>
<h2 id="whats-next">What's next?</h2>
<p>For personal convenience, I also have a template script to run the bot in different modes. You can check it out at <code>run.sh</code>. It'll <em>only</em> run the bot. You'll need to run Lavalink and PostgreSQL on your own.</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js" defer></script>
        <script src="../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
